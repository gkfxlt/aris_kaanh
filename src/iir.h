#ifndef IIR_H_
#define IIR_H_

#include <vector>

# define FORE_VEL_LENGTH 20	//速度平均值滤波buffer长度

namespace IIR_FILTER
{ 
	class IIR
	{
		private:
			std::vector<double> m_pNum;
			std::vector<double> m_pDen;
			std::vector<double> m_px;
			std::vector<double> m_py;
		public:
			int m_num_order;
			int m_den_order;
			IIR();
			void setPara(std::vector<double> &num, std::vector<double> &den);
			double filter(double data);
	};
	//IIR滤波器设计参数//
	const double num[] = { 0.000000000000000013182164400170805156025,
						0.000000000000000263643288003416103120495,
						0.000000000000002504611236032452930340896,
						0.000000000000015027667416194718370906282,
						0.000000000000063867586518827546765464458,
						0.000000000000204376276860248144600776471,
						0.000000000000510940692150620273149519792,
						0.00000000000102188138430124074824743132,
						0.000000000001660557249489516241145624862,
						0.000000000002214076332652688186895238659,
						0.000000000002435483965917957449871224345,
						0.000000000002214076332652688590792022132,
						0.000000000001660557249489516241145624862,
						0.000000000001021881384301240950195823057,
						0.000000000000510940692150620475097911528,
						0.000000000000204376276860248169844325438,
						0.000000000000063867586518827559387238941,
						0.000000000000015027667416194718370906282,
						0.000000000000002504611236032452930340896,
						0.000000000000000263643288003416103120495,
						0.000000000000000013182164400170805156025};

	const double den[] = { 1,
					   - 15.996151778769251095013714802917093038559,
					   121.876232900228117728147481102496385574341,
					  - 588.038618053062009494169615209102630615234,
					  2014.88250819375389255583286285400390625,
					 - 5211.2258605611932580359280109405517578125,
					 10555.363279812825567205436527729034423828125,
					- 17144.2777427567707491107285022735595703125,
					 22676.8432069954360486008226871490478515625,
					- 24665.969953838924993760883808135986328125,
					 22182.4118235665591782890260219573974609375,
					- 16521.53696729376315488480031490325927734375,
					 10172.7698668462326168082654476165771484375,
					 - 5149.72761659924071864224970340728759765625,
					  2122.278292083683936652960255742073059082031,
					  - 701.035119625746915517083834856748580932617,
					   181.249673954612291026933235116302967071533,
					   - 35.348187726544210818246938288211822509766,
						 4.891796270146391734101598558481782674789,
						- 0.428305594877081363680559888962307013571,
						 0.017843205428130341078096776641359610949 };
}

#endif